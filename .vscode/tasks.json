{
  // See https://go.microsoft.com/fwlink/?LinkId=733558
  // for the documentation about the tasks.json format
  "version": "2.0.0",
  "tasks": [
    {
      "label": "Start OpenOCD",
      "type": "shell",
      "group": "build",
      "command": "D:/workspace/toolchain/OpenOCD-0.8.0/bin/openocd -s D:/workspace/toolchain/OpenOCD-0.8.0/share/openocd/scripts -f board/stm32f4discovery.cfg"
    },
    {
      "label": "Debugserver STM32",
      "type": "shell",
      "group": "build",
      "command": "west debugserver -d build_stm32"
    },
    {
      "label": "Build MySTM32",
      "type": "shell",
      "group": "build",
      "options": {
        "env": {
          "GNUARMEMB_TOOLCHAIN_PATH": "D:/workspace/toolchain/gcc",
          "CROSS_COMPILE": "arm-none-eabi-",
          "ZEPHYR_TOOLCHAIN_VARIANT": "gnuarmemb"
        }
      },
      "command": "west build -b mystm32f4 -d build_mystm32 proj",
      "problemMatcher": [
        "$gcc"
      ]
    },
    {
      "label": "Flash MySTM32",
      "type": "shell",
      "group": "build",
      "options": {
        "env": {
          "GNUARMEMB_TOOLCHAIN_PATH": "D:/workspace/toolchain/gcc",
          "CROSS_COMPILE": "arm-none-eabi-",
          "ZEPHYR_TOOLCHAIN_VARIANT": "gnuarmemb"
        }
      },
      "command": "west flash -d build_mystm32 --openocd-search D:/workspace/toolchain/OpenOCD-0.8.0/share/openocd/scripts/",
      "problemMatcher": [
        "$gcc"
      ]
    },
    {
      "label": "Flash ST-Link Testboard",
      "type": "shell",
      "group": "build",
      "options": {
        "env": {
          "GNUARMEMB_TOOLCHAIN_PATH": "D:/workspace/toolchain/gcc",
          "CROSS_COMPILE": "arm-none-eabi-",
          "ZEPHYR_TOOLCHAIN_VARIANT": "gnuarmemb"
        }
      },
      "command": "ST-LINK_CLI.exe -c SWD SWCLK=4 SN=56FF70064971545016211087 -p ${workspaceFolder}/build_mystm32/zephyr/zephyr.hex -Rst",
      "problemMatcher": [
        "$gcc"
      ]
    },
    {
      "label": "Flash ST-Link Control",
      "type": "shell",
      "group": "build",
      "options": {
        "env": {
          "GNUARMEMB_TOOLCHAIN_PATH": "D:/workspace/toolchain/gcc",
          "CROSS_COMPILE": "arm-none-eabi-",
          "ZEPHYR_TOOLCHAIN_VARIANT": "gnuarmemb"
        }
      },
      "command": "ST-LINK_CLI.exe -c SWD SWCLK=4 SN=49FF69064983515154320987 -p ${workspaceFolder}/build_mystm32/zephyr/zephyr.hex -Rst",
      "problemMatcher": [
        "$gcc"
      ]
    },
    {
      "label": "Debug MySTM32",
      "type": "shell",
      "group": "build",
      "options": {
        "env": {
          "GNUARMEMB_TOOLCHAIN_PATH": "D:/workspace/toolchain/gcc",
          "CROSS_COMPILE": "arm-none-eabi-",
          "ZEPHYR_TOOLCHAIN_VARIANT": "gnuarmemb"
        }
      },
      "command": "west debugserver -d build_mystm32 --openocd-search D:/workspace/toolchain/OpenOCD-0.8.0/share/openocd/scripts/",
      "problemMatcher": [
        "$gcc"
      ]
    },
    {
      "label": "Build MyESP32",
      "type": "shell",
      "group": "build",
      "options": {
        "env": {
          "ESPRESSIF_TOOLCHAIN_PATH": "C:/Users/gausa/.espressif/tools/xtensa-esp32-elf/esp-2020r3-8.4.0/xtensa-esp32-elf",
          "CROSS_COMPILE": "xtensa-esp32-elf-",
          "ZEPHYR_TOOLCHAIN_VARIANT": "espressif"
        }
      },
      "command": "west build -b myesp32 -d build_myesp32 proj",
      "problemMatcher": [
        "$gcc"
      ]
    },
    {
      "label": "Flash MyESP32",
      "type": "shell",
      "group": "build",
      "options": {
        "env": {
          "ESPRESSIF_TOOLCHAIN_PATH": "C:/Users/gausa/.espressif/tools/xtensa-esp32-elf/esp-2020r3-8.4.0/xtensa-esp32-elf",
          "CROSS_COMPILE": "xtensa-esp32-elf-",
          "ZEPHYR_TOOLCHAIN_VARIANT": "espressif"
        }
      },
      "command": "west flash -d build_myesp32 --esp-device COM7",
      "problemMatcher": [
        "$gcc"
      ]
    },
    {
      "label": "Menuconfig MySTM32",
      "type": "shell",
      "group": "build",
      "options": {
        "env": {
          "GNUARMEMB_TOOLCHAIN_PATH": "D:/workspace/toolchain/gcc",
          "CROSS_COMPILE": "arm-none-eabi-",
          "ZEPHYR_TOOLCHAIN_VARIANT": "gnuarmemb"
        }
      },
      "command": "west build -t guiconfig proj",
      "problemMatcher": [
        "$gcc"
      ]
    },
    {
      "label": "Code Tests config",
      "type": "shell",
      "group": "build",
      "command": "cd ${workspaceFolder}/proj/lib/; cmake -Bbuild",
    },
    {
      "label": "Code Tests run",
      "type": "shell",
      "group": "build",
      "command": "cd ${workspaceFolder}/proj/lib/; cmake --build build -t lib_tests; ${workspaceFolder}/proj/lib/build/Debug/lib_tests",
      "problemMatcher": [
        "$msCompile"
      ]
    },
    {
      "label": "Run BDD PiL",
      "type": "shell",
      "group": "build",
      "command": "behave --capture --capture-stderr --junit -s",
      "problemMatcher": []
    }
  ]
}